<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<!-- <h1>RevLine league event</h1> -->
<img src="img/revline_no_bg.png" alt="Img failed" class="mx-auto d-block" style="height: 300px;">
<table>
  <thead>
    <tr>
      <th>Player</th>
      <th>Event 1</th>
      <th>Event 2</th>
      <th>Event 3</th>
      <th>Event 4</th>
      <th>Total Score</th>
    </tr>
  </thead>
  <tbody>
    <script>
      // Function to determine the maximum and second maximum score for each event
      function getMaxAndSecondMaxEventScores(event) {
        const scores = players.map(player => player[event]);
        const max = Math.max(...scores);
        scores.splice(scores.indexOf(max), 1);
        const secondMax = Math.max(...scores);
        return { max, secondMax };
      }

      players.sort((a, b) => (b.event1 + b.event2 + b.event3 + b.event4) - (a.event1 + a.event2 + a.event3 + a.event4));

      players.forEach(function(player, index) {
        var row = document.createElement("tr");
        const event1Scores = getMaxAndSecondMaxEventScores('event1');
        const event2Scores = getMaxAndSecondMaxEventScores('event2');
        const event3Scores = getMaxAndSecondMaxEventScores('event3');
        const event4Scores = getMaxAndSecondMaxEventScores('event4');
        row.innerHTML = `
          <td>${player.name}</td>
          <td class="${player.event1 === 0 ? '' : (player.event1 === event1Scores.max ? 'gold-event1' : (player.event1 === event1Scores.secondMax ? 'silver-event1' : (index < 3 ? 'bronze-event1' : 'background-event1')))}">${player.event1}</td>
          <td class="${player.event2 === 0 ? '' : (player.event2 === event2Scores.max ? 'gold-event2' : (player.event2 === event2Scores.secondMax ? 'silver-event2' : (index < 3 ? 'bronze-event2' : 'background-event2')))}">${player.event2}</td>
          <td class="${player.event3 === 0 ? '' : (player.event3 === event3Scores.max ? 'gold-event3' : (player.event3 === event3Scores.secondMax ? 'silver-event3' : (index < 3 ? 'bronze-event3' : 'background-event3')))}">${player.event3}</td>
          <td class="${player.event4 === 0 ? '' : (player.event4 === event4Scores.max ? 'gold-event4' : (player.event4 === event4Scores.secondMax ? 'silver-event4' : (index < 3 ? 'bronze-event4' : 'background-event4')))}">${player.event4}</td>
          <td>${player.event1 + player.event2 + player.event3 + player.event4}</td>
        `;
        document.querySelector("tbody").appendChild(row);
      });
    </script>
  </tbody>
</table>

<div class="race-schedule">
  <h2>Race Schedule</h2>
  <div class="race-week">
    <h3>Week 1 (28 October)</h3>
    <p><strong>Car:</strong> Sunrise Super</p>
    <p><strong>Track 1:</strong> tbc</p>
    <p><strong>Track 2:</strong> tbc</p>
    <p><strong>Track 3:</strong> tbc</p>
    <p><strong>Track 4:</strong> tbc</p>
  </div>

  <div class="race-week">
    <h3>Week 2 (4 November)</h3>
    <p><strong>Car:</strong> Rocket</p>
    <p><strong>Track 1:</strong> tbc</p>
    <p><strong>Track 2:</strong> tbc</p>
    <p><strong>Track 3:</strong> tbc</p>
    <p><strong>Track 4:</strong> tbc</p>
  </div>

  <div class="race-week">
    <h3>Week 3 (11 November)</h3>
    <p><strong>Car:</strong> Venom</p>
    <p><strong>Track 1:</strong> tbc</p>
    <p><strong>Track 2:</strong> tbc</p>
    <p><strong>Track 3:</strong> tbc</p>
    <p><strong>Track 4:</strong> tbc</p>
  </div>

  <div class="race-week">
    <h3>Week 4 (18 November)</h3>
    <p><strong>Car:</strong> Gorbie</p>
    <p><strong>Track 1:</strong> tbc</p>
    <p><strong>Track 2:</strong> tbc</p>
    <p><strong>Track 3:</strong> tbc</p>
    <p><strong>Track 4:</strong> tbc</p>
  </div>
</div>

</div>
</body>
</html>
